---
NOTE: do not edit this file, it is generated in apps/svelte.dev/scripts/sync-docs/index.ts
title: $derived
---

derived state ã¯ `$derived` rune ã‚’ä½¿ç”¨ã—ã¦å®£è¨€ã—ã¾ã™:

> [!NOTE] æ—¥æœ¬èªç¿»è¨³ TIPS:ã€Œderiveã€ã¯ã€Œå¼•ãå‡ºã™ã€ã€Œæ´¾ç”Ÿã™ã‚‹ã€ã€Œç”±æ¥ã™ã‚‹ã€ãªã©ã®æ„ã€‚ã€Œderived stateã€ã¯ã€ä»–ã® state ã‚’å…ƒã«è¨ˆç®—ã•ã‚Œã‚‹ state ã‚’æ„å‘³ã—ã¾ã™ã€‚

```svelte
<script>
	let count = $state(0);
	let doubled = $derived(count * 2);
</script>

<button onclick={() => count++}>
	{doubled}
</button>

<p>{count} doubled is {doubled}</p>
```

`$derived(...)` å†…ã®å¼ã¯å‰¯ä½œç”¨(side-effects)ãŒãªã„ã‚‚ã®ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚Svelte ã¯ derived ã®å¼ã®ä¸­ã§ã® state ã®å¤‰æ›´ (ä¾‹: `count++`) ã‚’è¨±å¯ã—ã¾ã›ã‚“ã€‚

`$state` ã¨åŒæ§˜ã«ã€class ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ `$derived` ã¨ã—ã¦ãƒãƒ¼ã‚¯ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

> [!NOTE] Svelte ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã®ã‚³ãƒ¼ãƒ‰ã¯ä½œæˆæ™‚ã«ä¸€åº¦ã ã‘å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚`$derived` rune ãŒãªã„å ´åˆã€`count` ãŒå¤‰åŒ–ã—ã¦ã‚‚ `doubled` ã¯å…ƒã®å€¤ã‚’ç¶­æŒã—ã¾ã™ã€‚

## `$derived.by`

çŸ­ã„å¼ã«åã¾ã‚‰ãªã„è¤‡é›‘ãª derived ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ãã®å ´åˆã¯ã€å¼•æ•°ã¨ã—ã¦é–¢æ•°ã‚’å—ã‘å–ã‚‹ `$derived.by` ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

```svelte
<script>
	let numbers = $state([1, 2, 3]);
	let total = $derived.by(() => {
		let total = 0;
		for (const n of numbers) {
			total += n;
		}
		return total;
	});
</script>

<button onclick={() => numbers.push(numbers.length + 1)}>
	{numbers.join(' + ')} = {total}
</button>
```

æœ¬è³ªçš„ã«ã€`$derived(expression)` ã¯ `$derived.by(() => expression)` ã¨åŒç­‰ã§ã™ã€‚

## ä¾å­˜é–¢ä¿‚ã‚’ç†è§£ã™ã‚‹ <!--Understanding-dependencies-->

`$derived` å¼ (ã¾ãŸã¯ `$derived.by` ã®é–¢æ•°æœ¬ä½“) å†…ã§åŒæœŸçš„ã«èª­ã¿å–ã‚‰ã‚Œã‚‹ã‚‚ã®ã¯ã™ã¹ã¦ã€derived state ã® _ä¾å­˜é–¢ä¿‚(dependency)_ ã¨è¦‹ãªã•ã‚Œã¾ã™ã€‚ãã® state ãŒå¤‰æ›´ã•ã‚Œã‚‹ã¨ã€derived ã¯ _dirty_ ã¨ã—ã¦ãƒãƒ¼ã‚¯ã•ã‚Œã€æ¬¡å›èª­ã¿å–ã‚‰ã‚Œã‚‹éš›ã«å†è¨ˆç®—ã•ã‚Œã¾ã™ã€‚

state ã®ä¸€éƒ¨ã‚’ä¾å­˜é–¢ä¿‚ã¨ã—ã¦æ‰±ã‚ãªã„ã‚ˆã†ã«ã™ã‚‹ã«ã¯ã€[`untrack`](svelte#untrack) ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

## Overriding derived values

Derived expressions are recalculated when their dependencies change, but you can temporarily override their values by reassigning them (unless they are declared with `const`). This can be useful for things like _optimistic UI_, where a value is derived from the 'source of truth' (such as data from your server) but you'd like to show immediate feedback to the user:

```svelte
<script>
	let { post, like } = $props();

	let likes = $derived(post.likes);

	async function onclick() {
		// increment the `likes` count immediately...
		likes += 1;

		// and tell the server, which will eventually update `post`
		try {
			await like();
		} catch {
			// failed! roll back the change
			likes -= 1;
		}
	}
</script>

<button {onclick}>ğŸ§¡ {likes}</button>
```

> [!NOTE] Prior to Svelte 5.25, deriveds were read-only.

## Deriveds and reactivity

Unlike `$state`, which converts objects and arrays to [deeply reactive proxies]($state#Deep-state), `$derived` values are left as-is. For example, [in a case like this](/playground/untitled#H4sIAAAAAAAAE4VU22rjMBD9lUHd3aaQi9PdstS1A3t5XvpQ2Ic4D7I1iUUV2UjjNMX431eS7TRdSosxgjMzZ45mjt0yzffIYibvy0ojFJWqDKCQVBk2ZVup0LJ43TJ6rn2aBxw-FP2o67k9oCKP5dziW3hRaUJNjoYltjCyplWmM1JIIAn3FlL4ZIkTTtYez6jtj4w8WwyXv9GiIXiQxLVs9pfTMR7EuoSLIuLFbX7Z4930bZo_nBrD1bs834tlfvsBz9_SyX6PZXu9XaL4gOWn4sXjeyzftv4ZWfyxubpzxzg6LfD4MrooxELEosKCUPigQCMPKCZh0OtQE1iSxcsmdHuBvCiHZXALLXiN08EL3RRkaJ_kDVGle0HcSD5TPEeVtj67O4Nrg9aiSNtBY5oODJkrL5QsHtN2cgXp6nSJMWzpWWGasdlsGEMbzi5jPr5KFr0Ep7pdeM2-TCelCddIhDxAobi1jqF3cMaC1RKp64bAW9iFAmXGIHfd4wNXDabtOLN53w8W53VvJoZLh7xk4Rr3CoL-UNoLhWHrT1JQGcM17u96oES5K-kc2XOzkzqGCKL5De79OUTyyrg1zgwXsrEx3ESfx4Bz0M5UjVMHB24mw9SuXtXFoN13fYKOM1tyUT3FbvbWmSWCZX2Er-41u5xPoml45svRahl9Wb9aasbINJixDZwcPTbyTLZSUsAvrg_cPuCR7s782_WU8343Y72Qtlb8OYatwuOQvuN13M_hJKNfxann1v1U_B1KZ_D_mzhzhz24fw85CSz2irtN9w9HshBK7AQAAA==)...

```svelte
let items = $state([...]);

let index = $state(0);
let selected = $derived(items[index]);
```

...you can change (or `bind:` to) properties of `selected` and it will affect the underlying `items` array. If `items` was _not_ deeply reactive, mutating `selected` would have no effect.

## æ›´æ–°ã®ä¼æ¬ <!--Update-propagation-->

Svelte ã¯ _push-pull reactivity_ ã¨å‘¼ã°ã‚Œã‚‹ä»•çµ„ã¿ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ â€” state ãŒæ›´æ–°ã•ã‚Œã‚‹ã¨ã€ãã‚Œã«ä¾å­˜ã™ã‚‹ã™ã¹ã¦ã®ã‚‚ã® (ç›´æ¥çš„ã¾ãŸã¯é–“æ¥çš„ã§ã‚ã‚‹ã‹ã‚’å•ã‚ãš) ã«å³åº§ã«å¤‰æ›´ãŒé€šçŸ¥ã•ã‚Œã¾ã™ãŒ ('push')ã€derived ã®å€¤ã¯å®Ÿéš›ã«èª­ã¿å–ã‚‰ã‚Œã‚‹ã¾ã§å†è©•ä¾¡ã•ã‚Œã¾ã›ã‚“ ('pull')ã€‚

derived ã®æ–°ã—ã„å€¤ãŒä»¥å‰ã®å€¤ã¨å‚ç…§çš„ã«åŒä¸€ã§ã‚ã‚‹å ´åˆã€ä¸‹æµã®æ›´æ–°ã¯ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã¾ã™ã€‚ã¤ã¾ã‚Šã€`large` ãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã®ã¿ã€ãƒœã‚¿ãƒ³å†…ã®ãƒ†ã‚­ã‚¹ãƒˆãŒæ›´æ–°ã•ã‚Œã€`count` ãŒå¤‰æ›´ã•ã‚Œã¦ã‚‚æ›´æ–°ã•ã‚Œã¾ã›ã‚“ (ãŸã¨ãˆ `large` ãŒ `count` ã«ä¾å­˜ã—ã¦ã„ãŸã¨ã—ã¦ã‚‚):

```svelte
<script>
	let count = $state(0);
	let large = $derived(count > 10);
</script>

<button onclick={() => count++}>
	{large}
</button>
```
